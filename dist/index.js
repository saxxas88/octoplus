/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={523:t=>{t.exports={message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc venenatis pharetra velit. Nunc eleifend pharetra posuere. Proin id odio et est tincidunt accumsan. Cras porttitor egestas justo, vitae fermentum urna. Vestibulum sed lobortis lacus, faucibus cursus velit. Nullam a purus ut neque interdum tincidunt. Phasellus ut tellus velit. Morbi feugiat tellus in ipsum malesuada maximus.\n\nDonec ac imperdiet sapien. Fusce risus metus, ullamcorper sed fringilla nec, finibus sit amet dolor. Maecenas orci lacus, tristique et tincidunt vitae, porta nec sem. Sed ut turpis odio. Curabitur interdum, lacus vel semper auctor, purus sapien commodo nunc, vel commodo lacus dui id nisl. Proin elit diam, feugiat sit amet efficitur elementum, bibendum tristique nisi. Morbi id diam ornare, condimentum ipsum vel, pulvinar purus. Sed bibendum, nibh rhoncus consectetur pulvinar, urna ligula sagittis nunc, vel gravida elit erat ut eros. Duis facilisis, nibh vitae cursus ullamcorper, tortor ex laoreet leo, vel maximus mi eros non orci. Fusce pharetra bibendum nisi, sed mattis libero malesuada nec.\n\nInteger et tempor libero, in sollicitudin augue. Cras nec turpis scelerisque lectus commodo pharetra at mattis nunc. Aenean dictum, diam at posuere egestas, ligula sem fringilla augue, in lacinia tortor mi ac nunc. Vestibulum posuere sapien vitae venenatis rhoncus. Nullam fringilla orci eros, id laoreet nisl consectetur et. Curabitur tortor neque, imperdiet quis eleifend ac, ullamcorper vel risus. Ut sodales sollicitudin metus malesuada sodales.\n\nNullam efficitur, diam in posuere egestas, arcu urna interdum ligula, id aliquam enim odio euismod nulla. Vestibulum tristique efficitur dolor, sed euismod nibh euismod a. Donec efficitur fringilla nisi. Pellentesque sit amet lorem nec purus laoreet condimentum tristique ut libero. Curabitur et varius risus, in cursus felis. Duis tristique vestibulum eros ac ultrices. Integer leo ipsum, suscipit a lorem eget, imperdiet interdum ex. In eget quam sapien. Fusce tempus mi eu nulla aliquam, vitae varius est congue. Suspendisse consectetur eros ipsum, quis accumsan nisi lobortis sed. Nam volutpat nisi id velit molestie mattis. Nunc efficitur erat at sodales maximus.\n\nVestibulum at orci ac neque blandit vehicula ac id lacus. Pellentesque vulputate pharetra consectetur. Morbi commodo porta lacus eu commodo. Donec urna augue, consequat eget mollis et, feugiat non lorem. Suspendisse sed libero at arcu semper sagittis sit amet ut leo. Vivamus elit ligula, dignissim vel convallis et, suscipit et nisl. Vestibulum volutpat, nisl at finibus tristique, lacus odio sollicitudin mi, ut aliquet ligula ex in nibh."}},938:t=>{"use strict";t.exports=require("axios")},268:t=>{"use strict";t.exports=require("body-parser")},672:t=>{"use strict";t.exports=require("colors")},577:t=>{"use strict";t.exports=require("cors")},103:t=>{"use strict";t.exports=require("crypto-js")},818:t=>{"use strict";t.exports=require("dotenv")},252:t=>{"use strict";t.exports=require("express")},758:t=>{"use strict";t.exports=require("express-http-proxy")},377:t=>{"use strict";t.exports=require("puppeteer")},708:t=>{"use strict";t.exports=require("node:https")},136:t=>{"use strict";t.exports=require("node:url")},928:t=>{"use strict";t.exports=require("path")}},r={};function __webpack_require__(a){var o=r[a];if(void 0!==o)return o.exports;var i=r[a]={exports:{}};return t[a](i,i.exports,__webpack_require__),i.exports}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ownKeys(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.push.apply(a,o)}return a}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(a),!0).forEach((function(r){_defineProperty(t,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))}))}return t}function _defineProperty(t,r,a){return(r=function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var o=a.call(t,r||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var o,i,c,u,l=[],p=!0,h=!1;try{if(c=(a=a.call(t)).next,0===r){if(Object(a)!==a)return;p=!1}else for(;!(p=(o=c.call(a)).done)&&(l.push(o.value),l.length!==r);p=!0);}catch(t){h=!0,i=t}finally{try{if(!p&&null!=a.return&&(u=a.return(),Object(u)!==u))return}finally{if(h)throw i}}return l}}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(t,r){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function F(){};return{s:i,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function s(){a=a.call(t)},n:function n(){var t=a.next();return u=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{u||null==a.return||a.return()}finally{if(l)throw c}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var a=0,o=Array(r);a<r;a++)o[a]=t[a];return o}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function _regeneratorRuntime(){return r};var t,r={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(t,r,a){t[r]=a.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",p=c.toStringTag||"@@toStringTag";function define(t,r,a){return Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,a){return t[r]=a}}function wrap(t,r,a,o){var c=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(c.prototype),l=new Context(o||[]);return i(u,"_invoke",{value:makeInvokeMethod(t,a,l)}),u}function tryCatch(t,r,a){try{return{type:"normal",arg:t.call(r,a)}}catch(t){return{type:"throw",arg:t}}}r.wrap=wrap;var h="suspendedStart",d="suspendedYield",v="executing",m="completed",g={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,u,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(values([])));x&&x!==a&&o.call(x,u)&&(y=x);var b=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(a,i,c,u){var l=tryCatch(t[a],t,i);if("throw"!==l.type){var p=l.arg,h=p.value;return h&&"object"==_typeof(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,c,u)}),(function(t){invoke("throw",t,c,u)})):r.resolve(h).then((function(t){p.value=t,c(p)}),(function(t){return invoke("throw",t,c,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,a){invoke(t,o,r,a)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(r,a,o){var i=h;return function(c,u){if(i===v)throw Error("Generator is already running");if(i===m){if("throw"===c)throw u;return{value:t,done:!0}}for(o.method=c,o.arg=u;;){var l=o.delegate;if(l){var p=maybeInvokeDelegate(l,o);if(p){if(p===g)continue;return p}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===h)throw i=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=v;var y=tryCatch(r,a,o);if("normal"===y.type){if(i=o.done?m:d,y.arg===g)continue;return{value:y.arg,done:o.done}}"throw"===y.type&&(i=m,o.method="throw",o.arg=y.arg)}}}function maybeInvokeDelegate(r,a){var o=a.method,i=r.iterator[o];if(i===t)return a.delegate=null,"throw"===o&&r.iterator.return&&(a.method="return",a.arg=t,maybeInvokeDelegate(r,a),"throw"===a.method)||"return"!==o&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+o+"' method")),g;var c=tryCatch(i,r.iterator,a.arg);if("throw"===c.type)return a.method="throw",a.arg=c.arg,a.delegate=null,g;var u=c.arg;return u?u.done?(a[r.resultName]=u.value,a.next=r.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,g):u:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(r){if(r||""===r){var a=r[u];if(a)return a.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var i=-1,c=function next(){for(;++i<r.length;)if(o.call(r,i))return next.value=r[i],next.done=!1,next;return next.value=t,next.done=!0,next};return c.next=c}}throw new TypeError(_typeof(r)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(b,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,p,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,p,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),r.AsyncIterator=AsyncIterator,r.async=function(t,a,o,i,c){void 0===c&&(c=Promise);var u=new AsyncIterator(wrap(t,a,o,i),c);return r.isGeneratorFunction(a)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},defineIteratorMethods(b),define(b,p,"Generator"),define(b,u,(function(){return this})),define(b,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),a=[];for(var o in r)a.push(o);return a.reverse(),function next(){for(;a.length;){var t=a.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},r.values=values,Context.prototype={constructor:Context,reset:function reset(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!r)for(var a in this)"t"===a.charAt(0)&&o.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(r){if(this.done)throw r;var a=this;function handle(o,i){return u.type="throw",u.arg=r,a.next=o,i&&(a.method="next",a.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],u=c.completion;if("root"===c.tryLoc)return handle("end");if(c.tryLoc<=this.prev){var l=o.call(c,"catchLoc"),p=o.call(c,"finallyLoc");if(l&&p){if(this.prev<c.catchLoc)return handle(c.catchLoc,!0);if(this.prev<c.finallyLoc)return handle(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return handle(c.catchLoc,!0)}else{if(!p)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return handle(c.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var c=i;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=r&&r<=c.finallyLoc&&(c=null);var u=c?c.completion:{};return u.type=t,u.arg=r,c?(this.method="next",this.next=c.finallyLoc,g):this.complete(u)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),g},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),g}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===t){var o=a.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(a)}return i}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(r,a,o){return this.delegate={iterator:values(r),resultName:a,nextLoc:o},"next"===this.method&&(this.arg=t),g}},r}function asyncGeneratorStep(t,r,a,o,i,c,u){try{var l=t[c](u),p=l.value}catch(t){return void a(t)}l.done?r(p):Promise.resolve(p).then(o,i)}function _asyncToGenerator(t){return function(){var r=this,a=arguments;return new Promise((function(o,i){var c=t.apply(r,a);function _next(t){asyncGeneratorStep(c,o,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(c,o,i,_next,_throw,"throw",t)}_next(void 0)}))}}var a=__webpack_require__(252),o=__webpack_require__(928);__webpack_require__(818).config({path:o.resolve(__dirname,"..",".env")});var i,c,u=__webpack_require__(268),l=__webpack_require__(577),p=__webpack_require__(708),h=(__webpack_require__(136),__webpack_require__(758)),d=__webpack_require__(672),v=__webpack_require__(938),m=__webpack_require__(377),g=__webpack_require__(103),y=process.env.PORT_SERVER||3001,_=__webpack_require__(523).message,x=a(),b=process.env.HOST||"0.0.0.0",w=y||8080,k=process.env.PUBLIC_URL||"http://".concat(b,":").concat(w),R=6e4,S=process.env.WHITELIST,A=function corsOptionsDelegate(t,r){r(null,-1!==S.indexOf(t.header("Origin"))?{origin:!0}:{origin:!1})};x.use("/proxyEurostreamingImg",h("https://eurostreaming.casino")),x.use("/proxyAltadefinizioneImg",h("https://altadefinizione.my/")),x.use(u.json()),x.use(a.static(o.resolve(__dirname,"../dist/client")));var T=function detectElementNode(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:28e4,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o&&setTimeout((function(){return r=!0}),o),new Promise((function(o,l){var p=setInterval(_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:try{console.log(r,t.m3u8List,i),(t.m3u8List&&t.headersID||i&&c||null!==u&&u())&&(clearInterval(p),o(1)),!0===r&&(clearInterval(p),o(2))}catch(t){clearInterval(p),l(Error("failz"))}case 1:case"end":return a.stop()}}),_callee)}))),a)}))};function openSerie(t){return _openSerie.apply(this,arguments)}function _openSerie(){return(_openSerie=_asyncToGenerator(_regeneratorRuntime().mark((function _callee12(t){var r,a,o,i,c,u,l,p,h,d,v,g,y;return _regeneratorRuntime().wrap((function _callee12$(_){for(;;)switch(_.prev=_.next){case 0:return c=[],u=t.pageLink,l=[],_.prev=3,_.next=6,m.launch({headless:"new"});case 6:return r=_.sent,_.next=9,r.newPage();case 9:return a=_.sent,_.next=12,a.goto(u,{waitUntil:"networkidle2"});case 12:return _.next=14,a.waitForSelector(".serie-menu .tt_season ul li a.active",{timeout:R}).then((function(t){return t})).catch((function(t){return!1}));case 14:if(o=_.sent){_.next=17;break}throw new Error("Missing seasons");case 17:return _.next=19,a.$$eval(".serie-menu .tt_season ul li a",(function(t){return Array.from(t).map((function(t){return{num:t.innerText,href:t.href.split("#")[1]}}))})).catch((function(t){return!1}));case 19:if(o=_.sent){_.next=22;break}throw new Error("Data seasons incomplete");case 22:return i=o,_.next=25,a.waitForSelector(".serie-menu .tt_series .tab-pane ul li.active",{timeout:R}).then((function(t){return t})).catch((function(t){return!1}));case 25:if(o=_.sent){_.next=28;break}throw new Error("Missing episodes");case 28:p=_createForOfIteratorHelper(i),_.prev=29,p.s();case 31:if((h=p.n()).done){_.next=39;break}return d=h.value,_.next=35,a.$$eval(".serie-menu .tt_series .tab-pane#".concat(null==d?void 0:d.href," ul li"),(function(t){return Array.from(t).map((function(t){var r={},a=t.querySelectorAll("a[data-title]");r=Object.assign({},Array.from(a).map((function(t){return{serie:t.id,title:t.dataset.title,num:t.dataset.num}})))[0];var o=t.querySelectorAll(".mirrors a.mr");return r.links=Object.assign({},Array.from(o).map((function(t){return{host:t.dataset.m,link:t.dataset.link}}))),r}))})).catch((function(t){return!1}));case 35:(v=_.sent)&&c.push({season:d,episodes:v});case 37:_.next=31;break;case 39:_.next=44;break;case 41:_.prev=41,_.t0=_.catch(29),p.e(_.t0);case 44:return _.prev=44,p.f(),_.finish(44);case 47:return a.close(),l=c||["false"],_.abrupt("return",{events_list:l});case 52:return _.prev=52,_.t1=_.catch(3),null===(g=a)||void 0===g||g.close(),console.log("scrapeEvents::ERROR->",_.t1),_.abrupt("return",!1);case 57:return _.prev=57,null===(y=r)||void 0===y||y.close(),_.finish(57);case 60:case"end":return _.stop()}}),_callee12,null,[[3,52,57,60],[29,41,44,47]])})))).apply(this,arguments)}function openFilm(t){return _openFilm.apply(this,arguments)}function _openFilm(){return(_openFilm=_asyncToGenerator(_regeneratorRuntime().mark((function _callee13(t){var r,a,o,i,c,u,l,p,h,d,v,g,y;return _regeneratorRuntime().wrap((function _callee13$(_){for(;;)switch(_.prev=_.next){case 0:return objFilm=[],c=t.pageLink,u=[],_.prev=3,_.next=6,m.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox","--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36"]});case 6:return r=_.sent,_.next=9,r.newPage();case 9:return a=_.sent,_.next=12,a.goto(c,{waitUntil:"networkidle2"});case 12:return _.next=14,a.waitForSelector('iframe[src*="mostra"]',{timeout:R}).then((function(t){return t})).catch((function(t){return!1}));case 14:if(o=_.sent){_.next=17;break}throw new Error("Missing iframe");case 17:return _.next=19,a.$eval('iframe[src*="mostra"]',(function(t){return null==t?void 0:t.src})).catch((function(t){return!1}));case 19:if(o=_.sent){_.next=22;break}throw new Error("Missing iframe src");case 22:return _.next=24,a.goto(o,{waitUntil:"networkidle2"});case 24:return _.next=26,a.waitForSelector("li[data-link]",{timeout:R}).then((function(t){return t})).catch((function(t){return!1}));case 26:if(o=_.sent){_.next=29;break}throw new Error("Missing links");case 29:return _.next=31,a.$$eval("li[data-link]",(function(t){return Array.from(t).map((function(t){var r,a,o,i;return{data_link:null==t||null===(r=t.dataset)||void 0===r||!r.link||null!=t&&null!==(a=t.dataset)&&void 0!==a&&null!==(a=a.link)&&void 0!==a&&a.includes("http")?null==t||null===(i=t.dataset)||void 0===i?void 0:i.link:"https:".concat(null==t||null===(o=t.dataset)||void 0===o?void 0:o.link)}}))})).catch((function(t){return!1}));case 31:if(o=_.sent,i=o,o){_.next=35;break}throw new Error("Missing links");case 35:l=_createForOfIteratorHelper(i);try{for(l.s();!(p=l.n()).done;)(null!=(v=p.value)&&null!==(h=v.data_link)&&void 0!==h&&h.includes("supervideo")||null!=v&&null!==(d=v.data_link)&&void 0!==d&&d.includes("dropload"))&&objFilm.push({link:null==v?void 0:v.data_link})}catch(t){l.e(t)}finally{l.f()}return a.close(),u=objFilm||["false"],_.abrupt("return",{events_list:u});case 42:return _.prev=42,_.t0=_.catch(3),null===(g=a)||void 0===g||g.close(),console.log("scrapeEvents::ERROR->",_.t0),_.abrupt("return",!1);case 47:return _.prev=47,null===(y=r)||void 0===y||y.close(),_.finish(47);case 50:case"end":return _.stop()}}),_callee13,null,[[3,42,47,50]])})))).apply(this,arguments)}function scrapeSeries(t){return _scrapeSeries.apply(this,arguments)}function _scrapeSeries(){return(_scrapeSeries=_asyncToGenerator(_regeneratorRuntime().mark((function _callee14(t){var r,a,o,i,c,u;return _regeneratorRuntime().wrap((function _callee14$(l){for(;;)switch(l.prev=l.next){case 0:return i=[],l.prev=1,l.next=4,m.launch({headless:"new"});case 4:return r=l.sent,l.next=7,r.newPage();case 7:return a=l.sent,l.next=10,a.goto("https://eurostreaming.casino",{waitUntil:"networkidle2"});case 10:return l.next=12,a.waitForSelector("input#story",{timeout:R}).then((function(t){return t})).catch((function(t){return t.message}));case 12:return o=l.sent,console.log("search input",o),l.next=16,a.$eval("input#story",(function(t,r){return t.value=r}),t).catch((function(t){return t.message}));case 16:return o=l.sent,console.log("set value to search",o),l.next=20,a.waitForSelector('form[role="search"]',{timeout:R}).then((function(t){return t})).catch((function(t){return t.message}));case 20:return o=l.sent,console.log("search form submit",o),l.next=24,a.$eval('form[role="search"]',(function(t){return t.submit()})).catch((function(t){return t.message}));case 24:return o=l.sent,console.log("click submit",o),l.next=28,Promise.race([new Promise((function(t,r){a.waitForSelector(".list.post.type-post.status-publish",{timeout:R}).then((function(r){return t(r)})).catch((function(t){return!1}))})),new Promise((function(t,r){a.waitForSelector("#content .post-entry h3",{timeout:R}).then((function(r){return t(!1)})).catch((function(t){return!0}))}))]);case 28:if(o=l.sent,console.log("search result list",o),o){l.next=32;break}throw new Error("Missing serie Tv");case 32:return l.next=34,a.$$eval(".list.post.type-post.status-publish",(function(t){return Array.from(t).map((function(t){var r={},a=null==t?void 0:t.querySelector(".post-thumb img");r.img=!!a&&(null==a?void 0:a.src),r.alt=!!a&&(null==a?void 0:a.alt);var o=null==t?void 0:t.querySelector(".post-content a");return r.title=!!o&&(null==o?void 0:o.title),r.pageLink=!!a&&(null==o?void 0:o.href),r}))})).catch((function(t){return console.log(t.message),!1}));case 34:return o=l.sent,console.log("list",o),a.close(),i=o||["false"],l.abrupt("return",{events_list:i});case 41:return l.prev=41,l.t0=l.catch(1),null===(c=a)||void 0===c||c.close(),console.log("scrapeEvents::ERROR->",l.t0),l.abrupt("return",["false"]);case 46:return l.prev=46,null===(u=r)||void 0===u||u.close(),l.finish(46);case 49:case"end":return l.stop()}}),_callee14,null,[[1,41,46,49]])})))).apply(this,arguments)}function scrapeFilms(t){return _scrapeFilms.apply(this,arguments)}function _scrapeFilms(){return(_scrapeFilms=_asyncToGenerator(_regeneratorRuntime().mark((function _callee15(t){var r,a,o,i,c,u;return _regeneratorRuntime().wrap((function _callee15$(l){for(;;)switch(l.prev=l.next){case 0:return i=[],l.prev=1,l.next=4,m.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox","--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36"]});case 4:return r=l.sent,l.next=7,r.newPage();case 7:return a=l.sent,l.next=10,a.goto("https://altadefinizione.my/?story=".concat(t,"&do=search&subaction=search&titleonly=3"),{waitUntil:"networkidle2"});case 10:return l.next=12,Promise.race([new Promise((function(t,r){a.waitForSelector(".box",{timeout:R}).then((function(r){return t(r)})).catch((function(t){return!1}))})),new Promise((function(t,r){a.waitForSelector(".error b",{timeout:R}).then((function(r){return t(!1)})).catch((function(t){return!0}))}))]);case 12:if(o=l.sent){l.next=15;break}throw new Error("Missing Film");case 15:return l.next=17,a.$$eval(".box",(function(t){return Array.from(t).map((function(t){var r,a,o={},i=null==t?void 0:t.querySelector(".wrapperImage a img");o.img=!!i&&(null==i?void 0:i.src),o.alt=!!i&&(null==i?void 0:i.alt);var c=t.querySelector(".wrapperImage .info h2 a");o.title=!!c&&(null==c?void 0:c.innerText),o.pageLink=!!i&&(null==c?void 0:c.href);var u=t.querySelector(".wrapperImage .imdb-rate");return o.rate=!!u&&(null===(r=u)||void 0===r?void 0:r.innerText),u=t.querySelector(".title-ntx"),o.genre=!!u&&(null===(a=u)||void 0===a||null===(a=a.dataset)||void 0===a?void 0:a.title),o}))})).catch((function(t){return console.log(t.message),!1}));case 17:return o=l.sent,console.log("list",o),a.close(),i=o||["false"],l.abrupt("return",{events_list:i});case 24:return l.prev=24,l.t0=l.catch(1),null===(c=a)||void 0===c||c.close(),console.log("scrapeFilms::ERROR->",l.t0),l.abrupt("return",!1);case 29:return l.prev=29,null===(u=r)||void 0===u||u.close(),l.finish(29);case 32:case"end":return l.stop()}}),_callee15,null,[[1,24,29,32]])})))).apply(this,arguments)}function scrapeSports(t){return _scrapeSports.apply(this,arguments)}function _scrapeSports(){return _scrapeSports=_asyncToGenerator(_regeneratorRuntime().mark((function _callee17(t){var r,a,o,i,c,u,l,p,h,d,v,g,y,_,x,b,w,k,S,A,T,E,O,I,P,L,q,C,G,j,H,U;return _regeneratorRuntime().wrap((function _callee17$(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,m.launch({headless:"new"});case 3:return r=D.sent,D.next=6,r.newPage();case 6:return a=D.sent,D.next=9,a.goto("https://sportsonline.gl/prog.txt",{waitUntil:"networkidle2"});case 9:return D.next=11,a.waitForSelector("pre",{timeout:R});case 11:return o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],D.next=14,a.$eval("pre",(function(t){return null==t?void 0:t.innerText}));case 14:i=D.sent,c=null==i?void 0:i.split("\n\n"),u=[],l=_createForOfIteratorHelper(c);try{for(l.s();!(p=l.n()).done;)null!=(h=p.value)&&h.startsWith("  ")||null!=h&&h.startsWith("*")||null!=h&&h.startsWith("==")||u.push(h)}catch(t){l.e(t)}finally{l.f()}d=[],v=!1,g=_regeneratorRuntime().mark((function _loop(){var t,r,a;return _regeneratorRuntime().wrap((function _loop$(i){for(;;)switch(i.prev=i.next){case 0:t=_[y],(r=o.find((function(r){var a;return null===(a=t)||void 0===a?void 0:a.toLowerCase().startsWith(r)})))&&(v&&d.push(v),(v={}).day=r),!t.includes(":")?(t=t.replace(null===(a=v)||void 0===a||null===(a=a.day)||void 0===a?void 0:a.toUpperCase(),""),v.channels=v.channels?v.channels+"\n"+t:t):v.events=t;case 5:case"end":return i.stop()}}),_loop)})),y=0,_=u;case 23:if(!(y<_.length)){D.next=28;break}return D.delegateYield(g(),"t0",25);case 25:y++,D.next=23;break;case 28:v&&d.push(v),x=[],b=0,w=d;case 31:if(!(b<w.length)){D.next=59;break}if((S=w[b]).channels=null==S||null===(k=S.channels)||void 0===k?void 0:k.split("\n"),!Array.isArray(S.channels)){D.next=56;break}return(A=S.channels.filter((function(t){return""!=t})).map((function(t,r){var a;t=t.split(" ");var o,i=!1,c=!1;Array.isArray(t)&&(null===(a=t)||void 0===a?void 0:a.length)>=2&&(i=t[0],c=null===(o=t[1])||void 0===o?void 0:o.trim());return{channel:i,language:c}}))).push({language:"PORTUGUESE",channel:"SPORTTV1"}),A.push({language:"PORTUGUESE",channel:"SPORTTV2"}),A.push({language:"PORTUGUESE",channel:"SPORTTV3"}),A.push({language:"PORTUGUESE",channel:"SPORTTV4"}),D.next=42,r.newPage();case 42:return a=D.sent,D.next=45,a.evaluate((function(t){var r=t.partChannels;return Object.groupBy(r,(function(t){return t.language}))}),{partChannels:A});case 45:if(A=D.sent,a.close(),S.channels=A,S.events=S.events.split("\n"),T=S.events.map((function(t,r){var a,o,i;try{var c,u,l=null==t?void 0:t.split("  ");return a=l[0],i=null===(c=l[1])||void 0===c||null===(c=c.split("|")[0])||void 0===c?void 0:c.trim(),{time:a,link:o=null===(u=l[1])||void 0===u||null===(u=u.split("|")[1])||void 0===u?void 0:u.trim(),title:i}}catch(t){return{time:a,link:o,title:i}}})),!t||""==t.trim()){D.next=54;break}return D.next=53,T.filter((function(r){var a;return null==r||null===(a=r.title)||void 0===a?void 0:a.toLowerCase().includes(null==t?void 0:t.toLowerCase())}));case 53:T=D.sent;case 54:S.events=T,x.push(S);case 56:b++,D.next=31;break;case 59:E=0,O=x;case 60:if(!(E<O.length)){D.next=81;break}I=O[E],P=_createForOfIteratorHelper(null==I?void 0:I.events),D.prev=63,q=_regeneratorRuntime().mark((function _loop2(){var t,r,a,o,i,c;return _regeneratorRuntime().wrap((function _loop2$(u){for(;;)switch(u.prev=u.next){case 0:t=L.value,u.prev=1,a=0,o=Object.entries(I.channels);case 3:if(!(a<o.length)){u.next=11;break}if(i=_slicedToArray(o[a],2),i[0],c=i[1],!(r=c.find((function(r){return t.link.includes(r.channel.toLowerCase())})))){u.next=8;break}return u.abrupt("break",11);case 8:a++,u.next=3;break;case 11:u.next=15;break;case 13:u.prev=13,u.t0=u.catch(1);case 15:r&&(t.channel=r.channel,t.language=r.language);case 16:case"end":return u.stop()}}),_loop2,null,[[1,13]])})),P.s();case 66:if((L=P.n()).done){D.next=70;break}return D.delegateYield(q(),"t1",68);case 68:D.next=66;break;case 70:D.next=75;break;case 72:D.prev=72,D.t2=D.catch(63),P.e(D.t2);case 75:return D.prev=75,P.f(),D.finish(75);case 78:E++,D.next=60;break;case 81:return C=[{title:"channels",name:"HD1",link:"https://v3.sportsonline.si/channels/hd/hd1.php"},{title:"channels",name:"HD2",link:"https://v3.sportsonline.si/channels/hd/hd2.php"},{title:"channels",name:"HD3",link:"https://v3.sportsonline.si/channels/hd/hd3.php"},{title:"channels",name:"HD4",link:"https://v3.sportsonline.si/channels/hd/hd4.php"},{title:"channels",name:"HD5",link:"https://v3.sportsonline.si/channels/hd/hd5.php"},{title:"channels",name:"HD6",link:"https://v3.sportsonline.si/channels/hd/hd6.php"},{title:"channels",name:"HD7",link:"https://v3.sportsonline.si/channels/hd/hd7.php"},{title:"channels",name:"HD8",link:"https://v3.sportsonline.si/channels/hd/hd8.php"},{title:"channels",name:"HD9",link:"https://v3.sportsonline.si/channels/hd/hd9.php"},{title:"channels",name:"HD10",link:"https://v3.sportsonline.si/channels/hd/hd10.php"},{title:"channels",name:"HD11",link:"https://v3.sportsonline.si/channels/hd/hd11.php"},{title:"channels",name:"BR1",link:"https://v3.sportsonline.si/channels/bra/br1.php"},{title:"channels",name:"BR2",link:"https://v3.sportsonline.si/channels/bra/br2.php"},{title:"channels",name:"BR3",link:"https://v3.sportsonline.si/channels/bra/br3.php"},{title:"channels",name:"BR4",link:"https://v3.sportsonline.si/channels/bra/br4.php"},{title:"channels",name:"BR5",link:"https://v3.sportsonline.si/channels/bra/br5.php"},{title:"channels",name:"BR6",link:"https://v3.sportsonline.si/channels/bra/br6.php"},{title:"channels",name:"BR7",link:"https://v3.sportsonline.si/channels/bra/br7.php"},{title:"channels",name:"SPORTTV1",link:"https://v3.sportsonline.si/channels/pt/sporttv1.php"},{title:"channels",name:"SPORTTV2",link:"https://v3.sportsonline.si/channels/pt/sporttv2.php"},{title:"channels",name:"SPORTTV3",link:"https://v3.sportsonline.si/channels/pt/sporttv3.php"},{title:"channels",name:"SPORTTV4",link:"https://v3.sportsonline.si/channels/pt/sporttv4.php"}],x.push({day:!1,events:C}),D.next=85,r.newPage();case 85:return a=D.sent,D.next=88,a.goto("https://calcio.run/streaming-gratis-calcio-1.php",{waitUntil:"networkidle2"});case 88:return D.next=90,a.waitForSelector("ul.kode_ticket_list",{timeout:R}).then((function(t){return t.$$eval("li",(function(t){return Array.from(t).map((function(t){var r,a,o,i={title:!1,time:!1,link:!1};return i.title=null===(r=t.querySelector(".ticket_title"))||void 0===r?void 0:r.innerText,i.time=null===(a=t.querySelector("p"))||void 0===a?void 0:a.innerText,i.link=null===(o=t.querySelector("a"))||void 0===o?void 0:o.href,i}))}))})).then(function(){var r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee16(r){return _regeneratorRuntime().wrap((function _callee16$(a){for(;;)switch(a.prev=a.next){case 0:if(!t||""==t.trim()){a.next=4;break}return a.next=3,r.filter((function(r){var a;return null==r||null===(a=r.title)||void 0===a||null===(a=a.toLowerCase())||void 0===a?void 0:a.includes(null==t?void 0:t.toLowerCase())}));case 3:r=a.sent;case 4:return a.abrupt("return",r);case 5:case"end":return a.stop()}}),_callee16)})));return function(t){return r.apply(this,arguments)}}()).catch((function(t){return!1}));case 90:return(G=D.sent)&&x&&x.length>0&&(x[0].events=x[0].events.concat(G)),j=x,a.close(),D.abrupt("return",{events_list:j,CHANNELS:C});case 97:return D.prev=97,D.t3=D.catch(0),null===(H=a)||void 0===H||H.close(),console.log("scrapeSports::ERROR->",D.t3),D.abrupt("return",!1);case 102:return D.prev=102,null===(U=r)||void 0===U||U.close(),D.finish(102);case 105:case"end":return D.stop()}}),_callee17,null,[[0,97,102,105],[63,72,75,78]])}))),_scrapeSports.apply(this,arguments)}function scrapeSportA(t){return _scrapeSportA.apply(this,arguments)}function _scrapeSportA(){return _scrapeSportA=_asyncToGenerator(_regeneratorRuntime().mark((function _callee18(t){var r,a,o,u;return _regeneratorRuntime().wrap((function _callee18$(l){for(;;)switch(l.prev=l.next){case 0:return i=null,c=null,l.prev=3,l.next=6,m.launch({headless:"new"});case 6:return r=l.sent,l.next=9,r.newPage();case 9:return(a=l.sent).setDefaultNavigationTimeout(3e5),l.next=13,a.tracing.start({categories:["devtools."],path:"./trace.json"});case 13:return a.on("request",(function(t){t.url().includes("/embed/")&&(c=t.url()),t.url().includes("m3u8?")&&(i=t.url())})),l.next=16,a.goto(t,{waitUntil:"networkidle2"});case 16:return l.next=19,T({m3u8List:i,headersID:c},1e3,1e4);case 19:return o=l.sent,console.log({m3u8List:i,headersID:c||t,rd:o}),l.abrupt("return",{m3u8List:i,headersID:c||t});case 24:return l.prev=24,l.t0=l.catch(3),console.log("scrapeEvent::ERROR->",l.t0.message),l.abrupt("return",!1);case 28:return l.prev=28,null===(u=r)||void 0===u||u.close(),l.finish(28);case 31:case"end":return l.stop()}}),_callee18,null,[[3,24,28,31]])}))),_scrapeSportA.apply(this,arguments)}function scrapeSportB(t){return _scrapeSportB.apply(this,arguments)}function _scrapeSportB(){return _scrapeSportB=_asyncToGenerator(_regeneratorRuntime().mark((function _callee19(t){var r,a,o,u;return _regeneratorRuntime().wrap((function _callee19$(l){for(;;)switch(l.prev=l.next){case 0:return i=null,c="https://calcio.run/",l.prev=2,l.next=5,m.launch({headless:"new"});case 5:return r=l.sent,l.next=8,r.newPage();case 8:return(a=l.sent).setDefaultNavigationTimeout(3e5),l.next=12,a.tracing.start({categories:["devtools."],path:"./trace.json"});case 12:return a.on("request",(function(t){t.url().includes("index.m3u8")&&(i=t.url())})),l.next=15,a.goto(t,{waitUntil:"networkidle2"});case 15:return l.next=17,a.evaluate((function(){try{var t;return player&&(null===(t=player)||void 0===t||t.play()),!!player}catch(t){return!1}}));case 17:return l.next=20,T({m3u8List:i},1e3,1e4);case 20:return o=l.sent,console.log({m3u8List:i,headersID:c,rd:o}),l.abrupt("return",{m3u8List:i,headersID:c});case 25:return l.prev=25,l.t0=l.catch(2),console.log("scrapeEvent::ERROR->",l.t0.message),l.abrupt("return",!1);case 29:return l.prev=29,null===(u=r)||void 0===u||u.close(),l.finish(29);case 32:case"end":return l.stop()}}),_callee19,null,[[2,25,29,32]])}))),_scrapeSportB.apply(this,arguments)}function scrapeSerie(t){return _scrapeSerie.apply(this,arguments)}function _scrapeSerie(){return _scrapeSerie=_asyncToGenerator(_regeneratorRuntime().mark((function _callee21(t){var r,a,o,u,l,p,h,d,v,g,y;return _regeneratorRuntime().wrap((function _callee21$(_){for(;;)switch(_.prev=_.next){case 0:return i=null,c=null,_.prev=3,_.next=6,m.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox","--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36"]});case 6:return r=_.sent,_.next=9,r.newPage();case 9:return(a=_.sent).setDefaultNavigationTimeout(3e5),o=[],u=!1,l=[],p=function nextRequest(){0===l.length?u=!1:l.shift()()},_.next=17,a.setRequestInterception(!0);case 17:return a.on("request",(function(t){u?l.push((function(){return t.continue()})):(u=!0,t.continue())})),a.on("requestfinished",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee20(t){var r,a;return _regeneratorRuntime().wrap((function _callee20$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.response();case 2:r=i.sent,r.headers(),a={url:t.url()},o.push(a),p();case 7:case"end":return i.stop()}}),_callee20)})));return function(r){return t.apply(this,arguments)}}()),a.on("requestfailed",(function(t){p()})),_.next=22,a.goto(t,{waitUntil:"networkidle2"});case 22:if(i){_.next=28;break}return _.next=25,a.evaluate((function(){try{return!!player&&player.getConfig().sources[0].file}catch(t){return!1}}));case 25:h=_.sent,console.log("Player:",h),h&&(i=h);case 28:if(i||c){_.next=50;break}d=_createForOfIteratorHelper(o),_.prev=30,d.s();case 32:if((v=d.n()).done){_.next=42;break}return request=v.value,request.url.includes("/embed")&&(c=request.url),request.url.includes("/master.m3u8")&&(i=request.url),_.next=39,T({m3u8List:i},1e3,1e4);case 39:_.sent;case 40:_.next=32;break;case 42:_.next=47;break;case 44:_.prev=44,_.t0=_.catch(30),d.e(_.t0);case 47:return _.prev=47,d.f(),_.finish(47);case 50:return console.log({m3u8List:i,headersID:c}),_.abrupt("return",{m3u8List:i,headersID:c||t});case 54:return _.prev=54,_.t1=_.catch(3),console.log("scrapeSerie::ERROR->",_.t1),_.abrupt("return",!1);case 58:return _.prev=58,null===(g=a)||void 0===g||g.close(),null===(y=r)||void 0===y||y.close(),_.finish(58);case 62:case"end":return _.stop()}}),_callee21,null,[[3,54,58,62],[30,44,47,50]])}))),_scrapeSerie.apply(this,arguments)}function scrapeFilm(t){return _scrapeFilm.apply(this,arguments)}function _scrapeFilm(){return _scrapeFilm=_asyncToGenerator(_regeneratorRuntime().mark((function _callee23(t){var r,a,o,u,l,p,h,d,v,g,y;return _regeneratorRuntime().wrap((function _callee23$(_){for(;;)switch(_.prev=_.next){case 0:return i=null,c=null,_.prev=3,_.next=6,m.launch({headless:"new",args:["--no-sandbox","--disable-setuid-sandbox","--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36"]});case 6:return r=_.sent,_.next=9,r.newPage();case 9:return(a=_.sent).setDefaultNavigationTimeout(3e5),o=[],u=!1,l=[],p=function nextRequest(){0===l.length?u=!1:l.shift()()},_.next=17,a.setRequestInterception(!0);case 17:return a.on("request",(function(t){u?l.push((function(){return t.continue()})):(u=!0,t.continue())})),a.on("requestfinished",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee22(t){var r,a;return _regeneratorRuntime().wrap((function _callee22$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.response();case 2:r=i.sent,r.headers(),a={url:t.url()},o.push(a),p();case 7:case"end":return i.stop()}}),_callee22)})));return function(r){return t.apply(this,arguments)}}()),a.on("requestfailed",(function(t){p()})),_.next=22,a.goto(t,{waitUntil:"networkidle2"});case 22:if(i){_.next=28;break}return _.next=25,a.evaluate((function(){try{return!!player&&player.getConfig().sources[0].file}catch(t){return!1}}));case 25:h=_.sent,console.log("Player:",h),h&&(i=h);case 28:for(d=0,v=o;d<v.length;d++)request=v[d],request.url.includes("/embed")&&(c=request.url),request.url.includes("/master.m3u8")&&(i=request.url);return console.log({m3u8List:i,headersID:c}),_.abrupt("return",{m3u8List:i,headersID:c||t});case 33:return _.prev=33,_.t0=_.catch(3),console.log("scrapeSerie::ERROR->",_.t0),_.abrupt("return",!1);case 37:return _.prev=37,null===(g=a)||void 0===g||g.close(),null===(y=r)||void 0===y||y.close(),_.finish(37);case 41:case"end":return _.stop()}}),_callee23,null,[[3,33,37,41]])}))),_scrapeFilm.apply(this,arguments)}function _proxyM3U(){return _proxyM3U=_asyncToGenerator(_regeneratorRuntime().mark((function _callee24(t,r,a){var o,i,c,u,l,p,h,d,m,g,y,_,x,b,w,R,S,A,T,E,O,I,P;return _regeneratorRuntime().wrap((function _callee24$(L){for(;;)switch(L.prev=L.next){case 0:return(o=r)["Accept-Encoding"]="gzip, deflate, br",o["User-Agent"]="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36",L.next=5,v(t,{headers:o}).catch((function(t){return console.log("axios",t.message),null}));case 5:if(i=L.sent){L.next=8;break}return L.abrupt("return");case 8:if(!(c=i&&(null==i?void 0:i.data)).includes("RESOLUTION=")){L.next=23;break}u=c.split("\n"),l=[],p=_createForOfIteratorHelper(u);try{for(p.s();!(h=p.n()).done;)(d=h.value).startsWith("#")?d.startsWith("#EXT-X-KEY:")?(y=/https?:\/\/[^\""\s]+/g,_="".concat(k).concat("/ts-proxy?url="+encodeURIComponent(null!==(m=null===(g=y.exec(d))||void 0===g?void 0:g[0])&&void 0!==m?m:"")+"&headers="+encodeURIComponent(JSON.stringify(r))),l.push(d.replace(y,_))):l.push(d):(x=new URL(d,t),l.push("".concat(k+"/m3u8-proxy?url="+encodeURIComponent(x.href)+"&headers="+encodeURIComponent(JSON.stringify(r)))))}catch(t){p.e(t)}finally{p.f()}return["Access-Control-Allow-Origin","Access-Control-Allow-Methods","Access-Control-Allow-Headers","Access-Control-Max-Age","Access-Control-Allow-Credentials","Access-Control-Expose-Headers","Access-Control-Request-Method","Access-Control-Request-Headers","Origin","Vary","Referer","Server","x-cache","via","x-amz-cf-pop","x-amz-cf-id"].map((function(t){return a.removeHeader(t)})),a.setHeader("Content-Type","application/vnd.apple.mpegurl"),a.setHeader("Access-Control-Allow-Origin","*"),a.setHeader("Access-Control-Allow-Headers","*"),a.setHeader("Access-Control-Allow-Methods","*"),a.end(l.join("\n")),L.abrupt("return");case 23:b=c.split("\n"),w=[],R=_createForOfIteratorHelper(b);try{for(R.s();!(S=R.n()).done;)(A=S.value).startsWith("#")?A.startsWith("#EXT-X-KEY:")?(O=/https?:\/\/[^\""\s]+/g,I="".concat(k).concat("/ts-proxy?url="+encodeURIComponent(null!==(T=null===(E=O.exec(A))||void 0===E?void 0:E[0])&&void 0!==T?T:"")+"&headers="+encodeURIComponent(JSON.stringify(r))),w.push(A.replace(O,I))):w.push(A):(P=new URL(A,t),w.push("".concat(k).concat("/ts-proxy?url="+encodeURIComponent(P.href)+"&headers="+encodeURIComponent(JSON.stringify(r)))))}catch(t){R.e(t)}finally{R.f()}return["Access-Control-Allow-Origin","Access-Control-Allow-Methods","Access-Control-Allow-Headers","Access-Control-Max-Age","Access-Control-Allow-Credentials","Access-Control-Expose-Headers","Access-Control-Request-Method","Access-Control-Request-Headers","Origin","Vary","Referer","Server","x-cache","via","x-amz-cf-pop","x-amz-cf-id"].map((function(t){return a.removeHeader(t)})),a.setHeader("Content-Type","application/vnd.apple.mpegurl"),a.setHeader("Access-Control-Allow-Origin","*"),a.setHeader("Access-Control-Allow-Headers","*"),a.setHeader("Access-Control-Allow-Methods","*"),a.end(w.join("\n")),L.abrupt("return");case 34:case"end":return L.stop()}}),_callee24)}))),_proxyM3U.apply(this,arguments)}function proxyTs(t,r,a,o){return _proxyTs.apply(this,arguments)}function _proxyTs(){return _proxyTs=_asyncToGenerator(_regeneratorRuntime().mark((function _callee25(t,r,a,o){var i,c,u,l,h;return _regeneratorRuntime().wrap((function _callee25$(d){for(;;)switch(d.prev=d.next){case 0:i=!1,t.startsWith("https://")&&(i=!0),c=new URL(t),u={hostname:c.hostname,port:c.port,path:c.pathname+c.search,method:a.method,headers:_objectSpread({"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36"},r)},d.prev=4,i?(l=p.request(u,(function(t){var r;t.headers["content-type"]="video/mp2t",o.writeHead(null!==(r=t.statusCode)&&void 0!==r?r:200,t.headers),t.pipe(o,{end:!0})})),a.pipe(l,{end:!0})):(h=http.request(u,(function(t){var r;t.headers["content-type"]="video/mp2t",o.writeHead(null!==(r=t.statusCode)&&void 0!==r?r:200,t.headers),t.pipe(o,{end:!0})})),a.pipe(h,{end:!0})),d.next=13;break;case 8:return d.prev=8,d.t0=d.catch(4),o.writeHead(500),o.end(d.t0.message),d.abrupt("return",null);case 13:case"end":return d.stop()}}),_callee25,null,[[4,8]])}))),_proxyTs.apply(this,arguments)}x.options("/scrapeEvent",l(A)),x.post("/scrapeEvent",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t,r){var a,o,i,c,u,l,p;return _regeneratorRuntime().wrap((function _callee2$(h){for(;;)switch(h.prev=h.next){case 0:if(console.log("API->/scrapeEvent"),o=t.body.choice,i=new URL(null!==(a=t.url)&&void 0!==a?a:k,"http://localhost:8080"),c={},h.prev=4,"sport"!=o){h.next=17;break}if(!t.url.includes("calcio.run")){h.next=12;break}return h.next=9,scrapeSportB(i.searchParams.get("url"));case 9:c=h.sent,h.next=15;break;case 12:return h.next=14,scrapeSportA(i.searchParams.get("url"));case 14:c=h.sent;case 15:h.next=26;break;case 17:if("film"!=o){h.next=23;break}return h.next=20,scrapeFilm(i.searchParams.get("url"));case 20:c=h.sent,h.next=26;break;case 23:return h.next=25,scrapeSerie(i.searchParams.get("url"));case 25:c=h.sent;case 26:h.next=34;break;case 28:return h.prev=28,h.t0=h.catch(4),r.writeHead(500),console.log("scrape::ERROR->",h.t0.message),r.end(JSON.stringify(c)),h.abrupt("return");case 34:return l=(u=c).m3u8List,p=u.headersID,r.json({m3u8List:l,headersID:p}),h.abrupt("return");case 37:case"end":return h.stop()}}),_callee2,null,[[4,28]])})));return function(r,a){return t.apply(this,arguments)}}()),x.options("/scrapeEvents",l(A)),x.post("/scrapeEvents",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t,r){var a,o,i,c,u;return _regeneratorRuntime().wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,console.log("API->/scrapeEvents"),a=t.body,o=a.word,i=a.choice,c={},l.prev=4,!i||"sport"!=i){l.next=11;break}return l.next=8,scrapeSports(o);case 8:l.t0=l.sent,l.next=21;break;case 11:if(!i||"film"!=i){l.next=17;break}return l.next=14,scrapeFilms(o);case 14:l.t1=l.sent,l.next=20;break;case 17:return l.next=19,scrapeSeries(o);case 19:l.t1=l.sent;case 20:l.t0=l.t1;case 21:c=l.t0,l.next=30;break;case 24:return l.prev=24,l.t2=l.catch(4),r.writeHead(500),console.log("scrape::ERROR->",l.t2.message),r.end(JSON.stringify({})),l.abrupt("return");case 30:return u=c.events_list,r.json({events_list:u}),l.abrupt("return");case 35:l.prev=35,l.t3=l.catch(0),console.log(l.t3.message);case 38:case"end":return l.stop()}}),_callee3,null,[[0,35],[4,24]])})));return function(r,a){return t.apply(this,arguments)}}()),x.options("/openSerie",l(A)),x.post("/openSerie",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(t,r){var a,o,i;return _regeneratorRuntime().wrap((function _callee4$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,console.log("API->/openSerie"),a=t.body.pageLink,o={},c.prev=4,c.next=7,openSerie({pageLink:a});case 7:o=c.sent,c.next=16;break;case 10:return c.prev=10,c.t0=c.catch(4),r.writeHead(500),console.log("scrape::ERROR->",c.t0.message),r.end(JSON.stringify({})),c.abrupt("return");case 16:return i=o.events_list,r.json({events_list:i}),c.abrupt("return");case 21:c.prev=21,c.t1=c.catch(0),console.log(c.t1.message);case 24:case"end":return c.stop()}}),_callee4,null,[[0,21],[4,10]])})));return function(r,a){return t.apply(this,arguments)}}()),x.options("/openFilm",l(A)),x.post("/openFilm",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(t,r){var a,o,i;return _regeneratorRuntime().wrap((function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,console.log("API->/openFilm"),a=t.body.pageLink,o={},c.prev=4,c.next=7,openFilm({pageLink:a});case 7:o=c.sent,c.next=16;break;case 10:return c.prev=10,c.t0=c.catch(4),r.writeHead(500),console.log("scrape::ERROR->",c.t0.message),r.end(JSON.stringify({})),c.abrupt("return");case 16:return i=o.events_list,r.json({events_list:i}),c.abrupt("return");case 21:c.prev=21,c.t1=c.catch(0),console.log(c.t1.message);case 24:case"end":return c.stop()}}),_callee5,null,[[0,21],[4,10]])})));return function(r,a){return t.apply(this,arguments)}}()),x.get("/m3u8-proxy",(function(t,r){var a,o=new URL(null!==(a=t.url)&&void 0!==a?a:k,"http://localhost:8080"),i={};try{var c;i=JSON.parse(null!==(c=o.searchParams.get("headers"))&&void 0!==c?c:"{}")}catch(t){return r.writeHead(500),void r.end(t.message)}var u=o.searchParams.get("url");return function proxyM3U8(t,r,a){return _proxyM3U.apply(this,arguments)}(null!=u?u:"",i,r)})),x.get("/ts-proxy",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(t,r){var a,o,i,c,u;return _regeneratorRuntime().wrap((function _callee6$(l){for(;;)switch(l.prev=l.next){case 0:o=new URL(null!==(a=t.url)&&void 0!==a?a:k,"http://localhost:8080"),i={},l.prev=2,i=JSON.parse(null!==(c=o.searchParams.get("headers"))&&void 0!==c?c:"{}"),l.next=11;break;case 6:return l.prev=6,l.t0=l.catch(2),r.writeHead(500),r.end(l.t0.message),l.abrupt("return");case 11:return u=o.searchParams.get("url"),l.abrupt("return",proxyTs(null!=u?u:"",i,t,r));case 13:case"end":return l.stop()}}),_callee6,null,[[2,6]])})));return function(r,a){return t.apply(this,arguments)}}());var E=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(t){var r;return _regeneratorRuntime().wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(r=process.env.PUBLIC_KEY)){a.next=6;break}return a.next=5,g.AES.encrypt(JSON.stringify(t),r).toString();case 5:return a.abrupt("return",a.sent);case 6:return a.abrupt("return",!1);case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",!1);case 12:case"end":return a.stop()}}),_callee7,null,[[0,9]])})));return function encryptData(r){return t.apply(this,arguments)}}(),O=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(t){var r,a;return _regeneratorRuntime().wrap((function _callee8$(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!(r=process.env.PUBLIC_KEY)){o.next=9;break}return o.next=5,g.AES.decrypt(t,r);case 5:return a=o.sent,o.next=8,JSON.parse(a.toString(g.enc.Utf8));case 8:return o.abrupt("return",o.sent);case 9:return o.abrupt("return",!1);case 12:return o.prev=12,o.t0=o.catch(0),console.log(o.t0.message),o.abrupt("return",!1);case 16:case"end":return o.stop()}}),_callee8,null,[[0,12]])})));return function decryptData(r){return t.apply(this,arguments)}}();x.post("/login",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee9(t,r){var a,o,i,c,u,l;return _regeneratorRuntime().wrap((function _callee9$(p){for(;;)switch(p.prev=p.next){case 0:return console.log("API->/login"),a=process.env.OPTIONS,p.prev=2,o=t.body.dataProfile,console.log(o),p.next=7,O(o);case 7:if(!(i=p.sent)){p.next=24;break}if(c=i.username,u=i.password,console.log("Login data recived:",{dataCipher:i,username:c,password:u}),console.log("Login data stored:",process.env.PROFILE_USERNAME,process.env.PROFILE_PASSWORD),c&&u){p.next=14;break}throw new Error("Missing data");case 14:if(c==process.env.PROFILE_USERNAME&&u==process.env.PROFILE_PASSWORD){p.next=16;break}throw new Error("Incorrect data");case 16:return p.next=18,E({username:c,password:u,options:JSON.parse(a)});case 18:if(l=p.sent,i){p.next=21;break}throw new Error("Data corrupted");case 21:r.json({data:l,error:!1}),p.next=25;break;case 24:throw new Error("Data corrupted");case 25:p.next=30;break;case 27:p.prev=27,p.t0=p.catch(2),r.json({data:!1,error:p.t0.message});case 30:case"end":return p.stop()}}),_callee9,null,[[2,27]])})));return function(r,a){return t.apply(this,arguments)}}()),x.get("/test",l(A),(function(t,r){console.log("API->/test"),r.json({message:_})})),x.get("/resources",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(t,r){var a,o,i,c,u,l,p,h,d,v,m,g;return _regeneratorRuntime().wrap((function _callee10$(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("API->/reources"),t.prev=1,a=process.env,o=a.AUTHORIZATION,i=a.SERVICE_TOKEN,!o||!i){t.next=26;break}return(u=new Headers).append("Content-Type","application/json"),u.append("Authorization","Bearer ".concat(o)),l={method:"GET",headers:u,redirect:"follow"},p=(new Date).getFullYear(),h=(new Date).getMonth()+1,d=new Date("".concat(p,"-").concat(h,"-01")).toISOString(),t.next=13,fetch("https://api.render.com/v1/metrics/bandwidth?startTime=".concat(d,"&resource=").concat(i),l).then((function(t){return t.json()})).catch((function(t){return console.error(t)}));case 13:if(v=t.sent){t.next=16;break}throw new Error("Data bandwidth undefined");case 16:return t.next=18,null==v||null===(c=v.shift())||void 0===c||null===(c=c.values)||void 0===c?void 0:c.map((function(t){return t.value})).reduce((function(t,r){return t+r}),0);case 18:if(m=t.sent){t.next=21;break}throw new Error("Data values undefined");case 21:return t.next=23,Number((.00097656259*m).toFixed(2));case 23:g=t.sent,console.log("API->/reources:residual_giga",g),r.json({data:g,error:!1});case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(1),console.log(t.t0.message),r.json({data:!1,error:t.t0.message});case 32:case"end":return t.stop()}}),_callee10,null,[[1,28]])})));return function(r,a){return t.apply(this,arguments)}}()),x.get("/img-proxy",l(A),function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee11(t,r){var a,o,i,c,u,l,p,h,d,m;return _regeneratorRuntime().wrap((function _callee11$(g){for(;;)switch(g.prev=g.next){case 0:return console.log("API->/proxy","/proxy/".concat(t.url.split("/img-proxy?")[1])),a=process.env.PUBLIC_URL,g.prev=2,l=null==t||null===(o=t.url)||void 0===o?void 0:o.split("/"),null===(i=l)||void 0===i||i.shift(),p=null===(c=l)||void 0===c?void 0:c.shift(),l=null===(u=l)||void 0===u?void 0:u.join("/"),h=!(null==p||!p.includes("eurostreaming"))&&"proxyEurostreamingImg",h=null!=p&&p.includes("altadefinizione")?"proxyAltadefinizioneImg":h,(d={})["Accept-Encoding"]="gzip, deflate, br",d["Content-Type"]="image/jpeg",g.next=14,v("".concat(a,"/").concat(h,"/").concat(l),{headers:d,responseType:"arraybuffer"}).then((function(t){return Buffer.from(t.data,"binary").toString("base64")})).catch((function(t){return console.log("axios",t.message),null}));case 14:if(m=g.sent){g.next=17;break}throw new Error("img proxy error");case 17:r.json({img_url:m}),g.next=23;break;case 20:g.prev=20,g.t0=g.catch(2),r.json({img_url:!1});case 23:case"end":return g.stop()}}),_callee11,null,[[2,20]])})));return function(r,a){return t.apply(this,arguments)}}()),x.get("*",(function(t,r){r.sendFile(o.resolve(__dirname,"../dist/client","index.html"))})),x.listen(y,(function(){console.log("Server listening on ".concat(d.green(y)))}))})();
//# sourceMappingURL=index.js.map